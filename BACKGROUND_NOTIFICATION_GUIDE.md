# 📱 后台通知设置指南

## 问题说明

如果您发现应用切换到后台后通知无法正常触发，只有在重新打开应用时才会收到积攒的通知，这是由于操作系统的后台限制导致的。以下是针对不同平台的解决方案。

## iOS 设置

### 1. 通知权限设置
- 打开 **设置** > **通知** > **喝水提醒**
- 确保 **允许通知** 开关已打开
- 确保 **锁定屏幕**、**通知中心**、**横幅** 都已启用
- 将提醒设置为 **立即送达**

### 2. 后台应用刷新
- 打开 **设置** > **通用** > **后台应用刷新**
- 确保总开关已打开
- 在应用列表中找到 **喝水提醒**，确保已启用

### 3. 专注模式设置
- 如果启用了专注模式或勿扰模式
- 在 **设置** > **专注模式** 中
- 将 **喝水提醒** 添加到允许的应用列表

### 4. 省电模式
- 避免在低电量模式下使用
- 确保设备电量充足

### 5. 应用使用建议
- 不要在多任务界面完全关闭应用
- 使用主屏幕按钮或手势返回桌面
- 定期打开应用以保持活跃状态

## Android 设置

### 1. 通知权限设置
- 打开 **设置** > **应用** > **喝水提醒** > **通知**
- 确保通知权限已启用
- 将通知重要性设置为 **高** 或 **紧急**
- 确保允许在锁屏上显示

### 2. 电池优化设置
- 打开 **设置** > **应用** > **喝水提醒** > **电池**
- 选择 **不优化** 或 **无限制**
- 在 **设置** > **电池** > **电池优化** 中，将应用设置为 **不优化**

### 3. 后台应用限制
- 打开 **设置** > **应用** > **喝水提醒**
- 确保 **后台活动** 已启用
- 在某些设备上需要启用 **允许后台运行**

### 4. 自启动管理（小米、华为等品牌）
- 打开 **设置** > **应用** > **应用启动管理**
- 找到 **喝水提醒**，设置为 **手动管理**
- 启用 **自启动**、**关联启动**、**后台活动**

### 5. 勿扰模式设置
- 在 **设置** > **声音和振动** > **勿扰模式** 中
- 添加 **喝水提醒** 到例外应用列表

### 6. 品牌特定设置

#### 小米手机
- **设置** > **应用设置** > **应用管理** > **喝水提醒** > **省电策略** > **无限制**
- **安全中心** > **应用管理** > **权限** > **自启动管理** > 启用喝水提醒

#### 华为手机
- **设置** > **应用** > **应用启动管理** > **喝水提醒** > **手动管理** > 全部启用
- **手机管家** > **应用启动管理** > 启用喝水提醒

#### OPPO/OnePlus
- **设置** > **电池** > **应用耗电管理** > **喝水提醒** > **允许后台运行**
- **设置** > **应用管理** > **喝水提醒** > **权限** > **自启动** > 启用

#### Vivo
- **设置** > **电池** > **后台耗电管理** > **喝水提醒** > **允许后台高耗电**
- **i管家** > **应用管理** > **自启动管理** > 启用喝水提醒

## 通用建议

### 1. 测试通知功能
- 在设置页面使用调试工具发送测试通知
- 设置较短的提醒间隔（如5分钟）进行测试
- 将应用切换到后台后观察通知是否正常

### 2. 应用使用习惯
- 定期打开应用记录饮水
- 避免频繁清理后台应用
- 保持设备有足够的存储空间

### 3. 系统版本
- 确保系统版本较新
- 某些老版本系统可能有更严格的后台限制

## 故障排除

### 如果通知仍然不工作

1. **重启设备**：完全重启手机
2. **重新安装应用**：卸载后重新安装
3. **检查系统版本**：确保系统是最新版本
4. **联系支持**：如果问题持续存在，请反馈给开发者

### 调试工具

应用内提供了调试工具（开发模式下可见）：
- **发送测试通知**：立即发送一个测试通知
- **10秒延迟通知**：测试延迟通知功能
- **查看通知列表**：查看已安排的通知
- **后台通知指南**：查看具体的设置建议
- **优化后台通知**：自动优化通知设置

### 性能建议

- 不要设置过于频繁的提醒（建议30分钟以上）
- 在睡眠时间关闭智能提醒
- 定期清理异常的通知设置

---

**注意**：不同设备制造商和系统版本的设置界面可能略有不同，请根据实际情况调整。 